# Домашнее задание к занятию "`Название занятия`" - `Фамилия и имя студента`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1  
Опишите основные преимущества использования масштабирования методами:  
1. активный master-сервер и пассивный репликационный slave-сервер;
2. master-сервер и несколько slave-серверов;
Дайте ответ в свободной форме.  
#### Ответ:
**1. Активный master-сервер и пассивный репликационный slave-сервер**  Классический метод организации масштабирования для обеспечения высокой доступности. Высокая надежность достигается за счет быстрого переноса функции сновного сервера на пассивный сервер в случае аварии на текущем основном сервере. Возможны некоторые потери данных, записанных на основном сервере в интервале между последней репликацией и моментом аварии на нём.

**2. Master-сервер и несколько slave-серверов** Такой метод позволяет распределять нагрузку чтения между несколькими серверами и обеспечить высокую производительность системы на операциях чтения. Применима для систем с высокой долей операций чтения.

### Задание 2  
Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:  
пользователи, книги, магазины (столбцы произвольно).  
Опишите принципы построения системы и их разграничение или разбивку между базами данных.  
Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.  

#### Ответ:
**1. Горизонтальный шардинг** 
- в таблицах шардов те же колонки;  
- разделение возможно по количественным блокам (id), но также и по фактическому местоположенияю (через user address и store address) или дркгому критерию (в зависимости от добавленных полей таблиц).
  
* Пользователи  
| USER shard_1            |  | USER shard_2            | ... | USER shard_N                  |  
| ----------------------- |  | ----------------------- | ... | ----------------------------- |
| user_id         (1-100) |  | user_id       (101-200) | ... | user_id ((N-1)x100+1 - N*100) |  
| first_name              |  | first_name              | ... | first_name                    |  
| last_name               |  | last_name               | ... | last_name                     |  
| password                |  | password                | ... | password                      |  
| address                 |  | address                 | ... | address                       |  
| main_store              |  | main_store              | ... | main_store                    |  

* Книги  
| BOOKS shard_1           |  | BOOKS shard_2           | ... | BOOKS shard_N                 |  
| ----------------------- |  | ----------------------- | ... | ----------------------------- |
| book_id   range (1-100) |  | book_id range (101-200) | ... | book_id ((N-1)x100+1 - N*100) |  
| header                  |  | header                  | ... | header                        |  
| author                  |  | author                  | ... | author                        |  
| publisher               |  | publisher               | ... | publisher                     |  
| edition_number          |  | edition_number          | ... | edition_number                |
| year                    |  | year                    | ... | year                          |    
| copy_number             |  | copy_number             | ... | copy_number                   |  
| store_id                |  | store_id                | ... | store_id                      |  

* Магазины  
| STORES shard_1          |  | STORES shadr_2          | ... | STORES shard_N                |  
| ----------------------- |  | ----------------------- | ... | ----------------------------- |
| store_id  range (1-10)  |  | store_id  range (11-20) | ... | store_id ((N-1)x10+1 - N*10)  |  
| name                    |  | name                    | ... | name                          |  
| address                 |  | address                 | ... | address                       |  
| chief_manager           |  | chief_manager           | ... | chief_manager                 |  

**2. Вертикальный шардинг**  
- в таблицах шардов разные колонки, данные объединены ключевым полем (primary key таблицы);  
- разделение колонок в некоторых случаях полезно для безопасности, а также для оптимизации и ускорения доступа к ним (например, посредством создания своих индексов).

* Пользователи  
| USER shard_1 (name)     |  | USER shard_authorization| ... | USER shadr_stores     |  
| ----------------------- |  | ----------------------- | ... | --------------------- |
| user_id                 |  | user_id                 | ... | user_id               |  
| first_name              |  | password                | ... | main_store            |  
| last_name               |
| address                 |

* Книги  
| BOOKS shard_name        |  | BOOKS shard_publication | ... | BOOKS shard_stores  |  
| ----------------------- |  | ----------------------- | ... | --------------------|
| book_id                 |  | book_id                 | ... | book_id             |  
| header                  |  | publisher               | ... | copy_number         |  
| author                  |  | edition_number          | ... | store_id            |  
|                         |  | year                    | ... |                     |  

* Магазины  
| STORES shard_label      |  | STORES shadr_address    | ... | STORES shard_chief  |  
| ----------------------- |  | ----------------------- | ... | ------------------- |
| store_id                |  | store_id                | ... | store_id            |  
| name                    |  | address                 | ... | chief_manager       |  




---

Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

### Задание 3*
Выполните настройку выбранных методов шардинга из задания 2.  
Пришлите конфиг Docker и SQL скрипт с командами для базы данных.  

#### Ответ:  